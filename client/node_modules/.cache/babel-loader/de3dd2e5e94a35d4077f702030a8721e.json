{"ast":null,"code":"var _jsxFileName = \"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/components/UserForms/Register.jsx\";\nimport React from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { SERVER_HOST } from \"../../config/global_constants\";\nimport { Form, Button } from \"react-bootstrap\";\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      this.setState({\n        wasSubmittedAtLeastOnce: true\n      });\n      axios.defaults.withCredentials = true;\n      axios.post(`${SERVER_HOST}/users/register/${this.state.name}/${this.state.email}/${this.state.password}`).then(res => {\n        Swal.fire({\n          title: \"User registered\",\n          text: \"User has been registered, you can now log in.\",\n          icon: \"success\",\n          showConfirmButton: false,\n          timer: 1500\n        });\n        this.setState({\n          isRegistered: true\n        });\n      }).catch(err => {\n        Swal.fire({\n          title: \"User not registered\",\n          text: err.response.data,\n          icon: \"error\",\n          showConfirmButton: true,\n          confirmButtonColor: \"#123c69\"\n        });\n      });\n    };\n\n    this.state = {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n      isRegistered: false\n    };\n  }\n\n  validateName() {\n    return this.state.name !== \"\";\n  }\n\n  validateEmail() {\n    return /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.state.email);\n  }\n\n  validatePassword() {\n    return /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[£!#€$%^&*]).{8,}$/.test(this.state.password);\n  }\n\n  validateConfirmPassword() {\n    return this.state.confirmPassword === this.state.password;\n  }\n\n  validate() {\n    return {\n      name: this.validateName(),\n      email: this.validateEmail(),\n      password: this.validatePassword(),\n      confirmPassword: this.validateConfirmPassword()\n    };\n  }\n\n  render() {\n    const formInputsState = this.validate();\n    const inputsAreAllValid = Object.keys(formInputsState).every(index => formInputsState[index]);\n    let nameError = \"\";\n    let emailError = \"\";\n    let passwordError = \"\";\n    let confirmPasswordError = \"\";\n\n    if (!this.validateName()) {\n      nameError = /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-danger mt-2\",\n        children: \"User name is required.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 19\n      }, this);\n    }\n\n    if (!this.validateEmail()) {\n      emailError = /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-danger mt-2\",\n        children: \"Invalid email.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 20\n      }, this);\n    }\n\n    if (!this.validatePassword()) {\n      let errorData = [];\n\n      if (this.state.password.length < 8) {\n        errorData.push({\n          id: 0,\n          message: \"Password must be at least 8 characters long.\"\n        });\n      }\n\n      if (!this.state.password.match(/(?=.*[0-9])/)) {\n        errorData.push({\n          id: 1,\n          message: \"Password must contain at least one digit (0-9).\"\n        });\n      }\n\n      if (!this.state.password.match(/[a-z]+/)) {\n        errorData.push({\n          id: 2,\n          message: \"Password must contain at least one lowercase character.\"\n        });\n      }\n\n      if (!this.state.password.match(/[A-Z]+/)) {\n        errorData.push({\n          id: 3,\n          message: \"Password must contain at least one uppercase character.\"\n        });\n      }\n\n      if (!this.state.password.match(/(?=.*[£!#€$%^&*])/)) {\n        errorData.push({\n          id: 4,\n          message: \"Password must contain at least one of the characters £!#€$%^&*\"\n        });\n      }\n\n      passwordError = /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"text-danger mt-2\",\n        children: errorData.map(e => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"error\",\n          children: e.message\n        }, e.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this);\n    }\n\n    if (!this.validateConfirmPassword()) {\n      confirmPasswordError = /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-danger mt-2\",\n        children: \"Passwords must match.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [this.state.isRegistered ? /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/shop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 36\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-10 col-xl-9 mx-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card flex-row my-5 border-0 shadow rounded-3 overflow-hidden\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body p-4 p-sm-5\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-center mb-3\",\n                children: \"Register\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-floating mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"name\",\n                    className: \"form-control\",\n                    id: \"floatingInputUsername\",\n                    placeholder: \"Enter your name\",\n                    onChange: this.handleChange,\n                    required: true,\n                    autoFocus: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 21\n                  }, this), nameError]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-floating mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Email address\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"email\",\n                    name: \"email\",\n                    className: \"form-control\",\n                    id: \"floatingInputEmail\",\n                    placeholder: \"name@example.com\",\n                    onChange: this.handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 21\n                  }, this), emailError]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-floating mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"password\",\n                    name: \"password\",\n                    className: \"form-control\",\n                    id: \"floatingPassword\",\n                    placeholder: \"Password\",\n                    onChange: this.handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 21\n                  }, this), passwordError]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-floating mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Confirm Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"password\",\n                    name: \"confirmPassword\",\n                    className: \"form-control\",\n                    id: \"floatingConfirmPassword\",\n                    placeholder: \"Confirm Password\",\n                    onChange: this.handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 21\n                  }, this), confirmPasswordError]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-grid mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    className: \"btn btn-block btn-primary btn-login fw-bold text-uppercase\",\n                    onClick: this.handleSubmit,\n                    disabled: !inputsAreAllValid,\n                    children: \"Register\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"d-block text-center mt-3 \",\n                  children: [\"Have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n                    to: \"/login\",\n                    children: \"Sign In\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 38\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                  className: \"my-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-grid mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-lg btn-google btn-login fw-bold text-uppercase\",\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fab fa-google me-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 234,\n                      columnNumber: 23\n                    }, this), \" Sign up with Google\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-grid\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-lg btn-facebook btn-login fw-bold text-uppercase\",\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fab fa-facebook-f me-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 240,\n                      columnNumber: 23\n                    }, this), \" Sign up with Facebook\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/components/UserForms/Register.jsx"],"names":["React","Link","Redirect","axios","SERVER_HOST","Form","Button","Swal","Register","Component","constructor","props","handleChange","e","setState","target","name","value","handleSubmit","wasSubmittedAtLeastOnce","defaults","withCredentials","post","state","email","password","then","res","fire","title","text","icon","showConfirmButton","timer","isRegistered","catch","err","response","data","confirmButtonColor","confirmPassword","validateName","validateEmail","test","validatePassword","validateConfirmPassword","validate","render","formInputsState","inputsAreAllValid","Object","keys","every","index","nameError","emailError","passwordError","confirmPasswordError","errorData","length","push","id","message","match","map"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { SERVER_HOST } from \"../../config/global_constants\";\nimport { Form, Button } from \"react-bootstrap\";\nimport Swal from \"sweetalert2\";\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n      isRegistered: false,\n    };\n  }\n\n  handleChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleSubmit = (e) => {\n    this.setState({ wasSubmittedAtLeastOnce: true });\n\n    axios.defaults.withCredentials = true;\n\n    axios\n      .post(\n        `${SERVER_HOST}/users/register/${this.state.name}/${this.state.email}/${this.state.password}`\n      )\n      .then((res) => {\n        Swal.fire({\n          title: \"User registered\",\n          text: \"User has been registered, you can now log in.\",\n          icon: \"success\",\n          showConfirmButton: false,\n          timer: 1500,\n        });\n        this.setState({ isRegistered: true });\n      })\n      .catch((err) => {\n        Swal.fire({\n          title: \"User not registered\",\n          text: err.response.data,\n          icon: \"error\",\n          showConfirmButton: true,\n          confirmButtonColor: \"#123c69\",\n        });\n      });\n  };\n\n  validateName() {\n    return this.state.name !== \"\";\n  }\n\n  validateEmail() {\n    return /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(\n      this.state.email\n    );\n  }\n\n  validatePassword() {\n    return /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[£!#€$%^&*]).{8,}$/.test(\n      this.state.password\n    );\n  }\n\n  validateConfirmPassword() {\n    return this.state.confirmPassword === this.state.password;\n  }\n\n  validate() {\n    return {\n      name: this.validateName(),\n      email: this.validateEmail(),\n      password: this.validatePassword(),\n      confirmPassword: this.validateConfirmPassword(),\n    };\n  }\n\n  render() {\n    const formInputsState = this.validate();\n    const inputsAreAllValid = Object.keys(formInputsState).every(\n      (index) => formInputsState[index]\n    );\n\n    let nameError = \"\";\n    let emailError = \"\";\n    let passwordError = \"\";\n    let confirmPasswordError = \"\";\n\n    if (!this.validateName()) {\n      nameError = <p className=\"text-danger mt-2\">User name is required.</p>;\n    }\n    if (!this.validateEmail()) {\n      emailError = <p className=\"text-danger mt-2\">Invalid email.</p>;\n    }\n    if (!this.validatePassword()) {\n      let errorData = [];\n\n      if (this.state.password.length < 8) {\n        errorData.push({\n          id: 0,\n          message: \"Password must be at least 8 characters long.\",\n        });\n      }\n      if (!this.state.password.match(/(?=.*[0-9])/)) {\n        errorData.push({\n          id: 1,\n          message: \"Password must contain at least one digit (0-9).\",\n        });\n      }\n      if (!this.state.password.match(/[a-z]+/)) {\n        errorData.push({\n          id: 2,\n          message: \"Password must contain at least one lowercase character.\",\n        });\n      }\n      if (!this.state.password.match(/[A-Z]+/)) {\n        errorData.push({\n          id: 3,\n          message: \"Password must contain at least one uppercase character.\",\n        });\n      }\n      if (!this.state.password.match(/(?=.*[£!#€$%^&*])/)) {\n        errorData.push({\n          id: 4,\n          message:\n            \"Password must contain at least one of the characters £!#€$%^&*\",\n        });\n      }\n\n      passwordError = (\n        <ul className=\"text-danger mt-2\">\n          {errorData.map((e) => (\n            <li key={e.id} className=\"error\">\n              {e.message}\n            </li>\n          ))}\n        </ul>\n      );\n    }\n    if (!this.validateConfirmPassword()) {\n      confirmPasswordError = (\n        <p className=\"text-danger mt-2\">Passwords must match.</p>\n      );\n    }\n\n    return (\n      <div className=\"container\">\n        {this.state.isRegistered ? <Redirect to=\"/shop\" /> : null}\n        <div className=\"row\">\n          <div className=\"col-lg-10 col-xl-9 mx-auto\">\n            <div className=\"card flex-row my-5 border-0 shadow rounded-3 overflow-hidden\">\n              <div className=\"card-body p-4 p-sm-5\">\n                <h3 className=\"text-center mb-3\">Register</h3>\n                <Form>\n                  <div className=\"form-floating mb-3\">\n                    <label>Name</label>\n                    <input\n                      type=\"text\"\n                      name=\"name\"\n                      className=\"form-control\"\n                      id=\"floatingInputUsername\"\n                      placeholder=\"Enter your name\"\n                      onChange={this.handleChange}\n                      required\n                      autoFocus\n                    />\n                    {nameError}\n                  </div>\n\n                  <div className=\"form-floating mb-3\">\n                    <label>Email address</label>\n                    <input\n                      type=\"email\"\n                      name=\"email\"\n                      className=\"form-control\"\n                      id=\"floatingInputEmail\"\n                      placeholder=\"name@example.com\"\n                      onChange={this.handleChange}\n                    />\n                    {emailError}\n                  </div>\n\n                  <hr />\n\n                  <div className=\"form-floating mb-3\">\n                    <label>Password</label>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      className=\"form-control\"\n                      id=\"floatingPassword\"\n                      placeholder=\"Password\"\n                      onChange={this.handleChange}\n                    />\n                    {passwordError}\n                  </div>\n\n                  <div className=\"form-floating mb-3\">\n                    <label>Confirm Password</label>\n                    <input\n                      type=\"password\"\n                      name=\"confirmPassword\"\n                      className=\"form-control\"\n                      id=\"floatingConfirmPassword\"\n                      placeholder=\"Confirm Password\"\n                      onChange={this.handleChange}\n                    />\n                    {confirmPasswordError}\n                  </div>\n\n                  <div className=\"d-grid mb-2\">\n                    <Button\n                      className=\"btn btn-block btn-primary btn-login fw-bold text-uppercase\"\n                      onClick={this.handleSubmit}\n                      disabled={!inputsAreAllValid}\n                    >\n                      Register\n                    </Button>\n                  </div>\n\n                  <p className=\"d-block text-center mt-3 \">\n                    Have an account? <Link to=\"/login\">Sign In</Link>\n                  </p>\n\n                  <hr className=\"my-4\" />\n\n                  <div className=\"d-grid mb-2\">\n                    <button className=\"btn btn-lg btn-google btn-login fw-bold text-uppercase\">\n                      <i className=\"fab fa-google me-2\"></i> Sign up with Google\n                    </button>\n                  </div>\n\n                  <div className=\"d-grid\">\n                    <button className=\"btn btn-lg btn-facebook btn-login fw-bold text-uppercase\">\n                      <i className=\"fab fa-facebook-f me-2\"></i> Sign up with\n                      Facebook\n                    </button>\n                  </div>\n                </Form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}