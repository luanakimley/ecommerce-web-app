{"ast":null,"code":"import _defineProperty from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{Link,Redirect}from\"react-router-dom\";import axios from\"axios\";import{SERVER_HOST}from\"../../config/global_constants\";import{Form,Button}from\"react-bootstrap\";import Swal from\"sweetalert2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LogIn=/*#__PURE__*/function(_React$Component){_inherits(LogIn,_React$Component);var _super=_createSuper(LogIn);function LogIn(props){var _this;_classCallCheck(this,LogIn);_this=_super.call(this,props);_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.handleSubmit=function(e){e.preventDefault();axios.defaults.withCredentials=true;axios.post(\"\".concat(SERVER_HOST,\"/users/login/\").concat(_this.state.email,\"/\").concat(_this.state.password)).then(function(res){localStorage._id=res.data._id;localStorage.name=res.data.name;localStorage.token=res.data.token;localStorage.accessLevel=res.data.accessLevel;localStorage.profilePhoto=res.data.profilePhoto;_this.setState({isLoggedIn:true});}).catch(function(err){Swal.fire({title:\"User not signed in\",text:err.response.data,icon:\"error\",showConfirmButton:true,confirmButtonColor:\"#123c69\"});});};_this.state={email:\"\",password:\"\",isLoggedIn:false,backToHome:false};return _this;}_createClass(LogIn,[{key:\"validateEmail\",value:function validateEmail(){return /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.state.email);}},{key:\"validatePassword\",value:function validatePassword(){return this.state.password!==\"\";}},{key:\"validate\",value:function validate(){return this.validateEmail()&&this.validatePassword();}},{key:\"refreshPage\",value:function refreshPage(){window.location.reload(false);}},{key:\"render\",value:function render(){var _this2=this;var emailError=\"\";var passwordError=\"\";if(!this.validateEmail()){emailError=/*#__PURE__*/_jsx(\"p\",{className:\"text-danger mt-2\",children:\"Invalid email.\"});}if(!this.validatePassword()){passwordError=/*#__PURE__*/_jsx(\"p\",{className:\"text-danger mt-2\",children:\"Enter a password.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[this.state.isLoggedIn?Swal.fire({title:\"User signed in\",icon:\"success\",showConfirmButton:false,timer:1500}).then(function(res){return _this2.refreshPage();}):localStorage.accessLevel!=0?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):null,/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-10 col-xl-9 mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card flex-row my-5 border-0 shadow rounded-3 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-4 p-sm-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center mb-3\",children:\"Sign In\"}),/*#__PURE__*/_jsxs(Form,{action:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",className:\"form-control\",id:\"floatingInputEmail\",placeholder:\"name@example.com\",onChange:this.handleChange}),emailError]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"form-control\",id:\"floatingPassword\",placeholder:\"Password\",onChange:this.handleChange}),passwordError]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid mb-2\",children:/*#__PURE__*/_jsx(Button,{className:\"btn btn-block btn-primary btn-login fw-bold text-uppercase\",onClick:this.handleSubmit,disabled:!this.validate(),children:\"Sign In\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"d-block text-center mt-3 \",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]})]})]})})})})]});}}]);return LogIn;}(React.Component);export default LogIn;","map":{"version":3,"sources":["/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/components/UserForms/LogIn.jsx"],"names":["React","Link","Redirect","axios","SERVER_HOST","Form","Button","Swal","LogIn","props","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","defaults","withCredentials","post","state","email","password","then","res","localStorage","_id","data","token","accessLevel","profilePhoto","isLoggedIn","catch","err","fire","title","text","response","icon","showConfirmButton","confirmButtonColor","backToHome","test","validateEmail","validatePassword","window","location","reload","emailError","passwordError","timer","refreshPage","validate","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { SERVER_HOST } from \"../../config/global_constants\";\nimport { Form, Button } from \"react-bootstrap\";\nimport Swal from \"sweetalert2\";\n\nclass LogIn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\",\n      isLoggedIn: false,\n      backToHome: false,\n    };\n  }\n\n  handleChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    axios.defaults.withCredentials = true;\n\n    axios\n      .post(\n        `${SERVER_HOST}/users/login/${this.state.email}/${this.state.password}`\n      )\n      .then((res) => {\n        localStorage._id = res.data._id;\n        localStorage.name = res.data.name;\n        localStorage.token = res.data.token;\n        localStorage.accessLevel = res.data.accessLevel;\n        localStorage.profilePhoto = res.data.profilePhoto;\n        this.setState({ isLoggedIn: true });\n      })\n      .catch((err) => {\n        Swal.fire({\n          title: \"User not signed in\",\n          text: err.response.data,\n          icon: \"error\",\n          showConfirmButton: true,\n          confirmButtonColor: \"#123c69\",\n        });\n      });\n  };\n\n  validateEmail() {\n    return /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(\n      this.state.email\n    );\n  }\n\n  validatePassword() {\n    return this.state.password !== \"\";\n  }\n\n  validate() {\n    return this.validateEmail() && this.validatePassword();\n  }\n\n  refreshPage() {\n    window.location.reload(false);\n  }\n\n  render() {\n    let emailError = \"\";\n    let passwordError = \"\";\n\n    if (!this.validateEmail()) {\n      emailError = <p className=\"text-danger mt-2\">Invalid email.</p>;\n    }\n\n    if (!this.validatePassword()) {\n      passwordError = <p className=\"text-danger mt-2\">Enter a password.</p>;\n    }\n\n    return (\n      <div className=\"container\">\n        {this.state.isLoggedIn ? (\n          Swal.fire({\n            title: \"User signed in\",\n            icon: \"success\",\n            showConfirmButton: false,\n            timer: 1500,\n          }).then((res) => this.refreshPage())\n        ) : localStorage.accessLevel != 0 ? (\n          <Redirect to=\"/\" />\n        ) : null}\n        <div className=\"row\">\n          <div className=\"col-lg-10 col-xl-9 mx-auto\">\n            <div className=\"card flex-row my-5 border-0 shadow rounded-3 overflow-hidden\">\n              <div className=\"card-body p-4 p-sm-5\">\n                <h3 className=\"text-center mb-3\">Sign In</h3>\n                <Form action=\"post\">\n                  <div className=\"form-floating mb-3\">\n                    <label>Email address</label>\n                    <input\n                      type=\"email\"\n                      name=\"email\"\n                      className=\"form-control\"\n                      id=\"floatingInputEmail\"\n                      placeholder=\"name@example.com\"\n                      onChange={this.handleChange}\n                    />\n                    {emailError}\n                  </div>\n\n                  <hr />\n\n                  <div className=\"form-floating mb-3\">\n                    <label>Password</label>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      className=\"form-control\"\n                      id=\"floatingPassword\"\n                      placeholder=\"Password\"\n                      onChange={this.handleChange}\n                    />\n                    {passwordError}\n                  </div>\n\n                  <div className=\"d-grid mb-2\">\n                    <Button\n                      className=\"btn btn-block btn-primary btn-login fw-bold text-uppercase\"\n                      onClick={this.handleSubmit}\n                      disabled={!this.validate()}\n                    >\n                      Sign In\n                    </Button>\n                  </div>\n\n                  <p className=\"d-block text-center mt-3 \">\n                    Don't have an account? <Link to=\"/register\">Register</Link>\n                  </p>\n                </Form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LogIn;\n"]},"metadata":{},"sourceType":"module"}