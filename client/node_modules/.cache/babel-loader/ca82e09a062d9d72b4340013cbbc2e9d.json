{"ast":null,"code":"import _classCallCheck from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import ShopBanner from\"../components/ShopBanner\";import CartCard from\"../components/ShoppingCart/CartCard\";import SummaryCard from\"../components/ShoppingCart/SummaryCard\";import axios from\"axios\";import{SERVER_HOST,ACCESS_LEVEL_GUEST}from\"../config/global_constants\";import{Spinner}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ShoppingCart=/*#__PURE__*/function(_React$Component){_inherits(ShoppingCart,_React$Component);var _super=_createSuper(ShoppingCart);function ShoppingCart(props){var _this;_classCallCheck(this,ShoppingCart);_this=_super.call(this,props);_this.state={cartItems:[],subtotal:0,shipping:0,total:0,loading:true};return _this;}_createClass(ShoppingCart,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(localStorage.accessLevel>parseInt(ACCESS_LEVEL_GUEST)){axios.get(\"\".concat(SERVER_HOST,\"/cart/\").concat(localStorage._id)).then(function(res){if(res.data){if(res.data.errorMessage){console.log(res.data.errorMessage);}else{_this2.setState({cartItems:res.data});var totalPrice=res.data.map(function(a){return a.productPrice*a.quantity;}).reduce(function(a,b){return a+b;},0);_this2.setState({subtotal:totalPrice});_this2.setState({shipping:9});_this2.setState({total:_this2.state.subtotal+_this2.state.shipping});_this2.setState({cartLength:res.data.length});_this2.setState({loading:false});}}});}else{this.setState({loading:false});if(localStorage.cart!==\"null\"){var cartItems=JSON.parse(localStorage.cart);this.setState({cartItems:cartItems});var totalPrice=cartItems.map(function(a){return a.productPrice*a.quantity;}).reduce(function(a,b){return a+b;},0);this.setState({subtotal:totalPrice});var shipping=totalPrice.subtotal>=30||totalPrice.subtotal===0?0:9;this.setState({shipping:shipping});var total=totalPrice+shipping;this.setState({total:total});}}}},{key:\"render\",value:function render(){return this.state.loading?/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\"})}):/*#__PURE__*/_jsxs(\"main\",{children:[console.log(this.state.cartItems),/*#__PURE__*/_jsx(ShopBanner,{title:\"Shopping Cart\"}),/*#__PURE__*/_jsx(\"section\",{className:\"shopping-cart\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container pl-5 pr-5 pt-3 pb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(CartCard,{cartItems:this.state.cartItems}),/*#__PURE__*/_jsx(SummaryCard,{cartItems:this.state.cartItems,subtotal:this.state.subtotal,shipping:this.state.shipping,total:this.state.total})]})})})})]});}}]);return ShoppingCart;}(React.Component);export default ShoppingCart;","map":{"version":3,"sources":["/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/pages/ShoppingCart.jsx"],"names":["React","ShopBanner","CartCard","SummaryCard","axios","SERVER_HOST","ACCESS_LEVEL_GUEST","Spinner","ShoppingCart","props","state","cartItems","subtotal","shipping","total","loading","localStorage","accessLevel","parseInt","get","_id","then","res","data","errorMessage","console","log","setState","totalPrice","map","a","productPrice","quantity","reduce","b","cartLength","length","cart","JSON","parse","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ShopBanner from \"../components/ShopBanner\";\nimport CartCard from \"../components/ShoppingCart/CartCard\";\nimport SummaryCard from \"../components/ShoppingCart/SummaryCard\";\nimport axios from \"axios\";\nimport { SERVER_HOST, ACCESS_LEVEL_GUEST } from \"../config/global_constants\";\nimport { Spinner } from \"react-bootstrap\";\n\nclass ShoppingCart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cartItems: [],\n      subtotal: 0,\n      shipping: 0,\n      total: 0,\n      loading: true,\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.accessLevel > parseInt(ACCESS_LEVEL_GUEST)) {\n      axios.get(`${SERVER_HOST}/cart/${localStorage._id}`).then((res) => {\n        if (res.data) {\n          if (res.data.errorMessage) {\n            console.log(res.data.errorMessage);\n          } else {\n            this.setState({ cartItems: res.data });\n            const totalPrice = res.data\n              .map((a) => a.productPrice * a.quantity)\n              .reduce((a, b) => a + b, 0);\n\n            this.setState({ subtotal: totalPrice });\n            this.setState({\n              shipping: 9,\n            });\n            this.setState({ total: this.state.subtotal + this.state.shipping });\n            this.setState({ cartLength: res.data.length });\n            this.setState({ loading: false });\n          }\n        }\n      });\n    } else {\n      this.setState({ loading: false });\n      if (localStorage.cart !== \"null\") {\n        const cartItems = JSON.parse(localStorage.cart);\n        this.setState({ cartItems: cartItems });\n        const totalPrice = cartItems\n          .map((a) => a.productPrice * a.quantity)\n          .reduce((a, b) => a + b, 0);\n\n        this.setState({ subtotal: totalPrice });\n        let shipping =\n          totalPrice.subtotal >= 30 || totalPrice.subtotal === 0 ? 0 : 9;\n        this.setState({ shipping: shipping });\n        let total = totalPrice + shipping;\n        this.setState({ total: total });\n      }\n    }\n  }\n\n  render() {\n    return this.state.loading ? (\n      <Spinner animation=\"border\" role=\"status\">\n        <span className=\"visually-hidden\"></span>\n      </Spinner>\n    ) : (\n      <main>\n        {console.log(this.state.cartItems)}\n        <ShopBanner title=\"Shopping Cart\" />\n        <section className=\"shopping-cart\">\n          <div className=\"container pl-5 pr-5 pt-3 pb-3\">\n            <div className=\"content\">\n              <div className=\"row\">\n                <CartCard cartItems={this.state.cartItems} />\n                <SummaryCard\n                  cartItems={this.state.cartItems}\n                  subtotal={this.state.subtotal}\n                  shipping={this.state.shipping}\n                  total={this.state.total}\n                />\n              </div>\n            </div>\n          </div>\n        </section>\n      </main>\n    );\n  }\n}\n\nexport default ShoppingCart;\n"]},"metadata":{},"sourceType":"module"}