{"ast":null,"code":"import _classCallCheck from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{PersonCircle,Cart3}from\"react-bootstrap-icons\";import{Link}from\"react-router-dom\";import{SERVER_HOST,ACCESS_LEVEL_GUEST,ACCESS_LEVEL_NORMAL_USER,ACCESS_LEVEL_ADMIN}from\"../../config/global_constants\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MetaData=/*#__PURE__*/function(_React$Component){_inherits(MetaData,_React$Component);var _super=_createSuper(MetaData);function MetaData(props){var _this;_classCallCheck(this,MetaData);_this=_super.call(this,props);_this.state={size:0};return _this;}_createClass(MetaData,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(localStorage.accessLevel>parseInt(ACCESS_LEVEL_GUEST)){axios.get(\"\".concat(SERVER_HOST,\"/cart/\").concat(localStorage._id)).then(function(res){if(res.data){if(res.data.errorMessage){console.log(res.data.errorMessage);}else{_this2.setState({size:res.data.map(function(a){return a.quantity;}).reduce(function(a,b){return a+b;},0)});}}});}else{if(localStorage.cart!==\"null\"){var curCart=JSON.parse(localStorage.cart);var size=curCart.map(function(a){return parseInt(a.quantity);}).reduce(function(a,b){return a+b;},0);this.setState({size:size});}}}},{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){return this.state!==nextState;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this3=this;if(localStorage.accessLevel>parseInt(ACCESS_LEVEL_GUEST)){axios.get(\"\".concat(SERVER_HOST,\"/cart/\").concat(localStorage._id)).then(function(res){if(res.data){if(res.data.errorMessage){console.log(res.data.errorMessage);}else{_this3.setState({size:res.data.map(function(a){return a.quantity;}).reduce(function(a,b){return a+b;},0)});}}if(_this3.state.size!==prevState.size){_this3.setState({size:_this3.state.size});}});}else{var curCart=JSON.parse(localStorage.cart);var size=curCart.map(function(a){return a.quantity;}).reduce(function(a,b){return a+b;},0);if(this.state.size!==size){this.setState({size:size});}}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"header-meta d-flex clearfix justify-content-end\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-login-info\",children:parseInt(localStorage.accessLevel)===ACCESS_LEVEL_GUEST?/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsxs(\"a\",{children:[/*#__PURE__*/_jsx(PersonCircle,{size:25,className:\"icon\"}),/*#__PURE__*/_jsx(\"p\",{children:\"SIGN IN\"})]})}):parseInt(localStorage.accessLevel)===ACCESS_LEVEL_NORMAL_USER?/*#__PURE__*/_jsx(Link,{to:\"/account/\"+localStorage._id,children:/*#__PURE__*/_jsxs(\"a\",{children:[localStorage.profilePhoto!==\"null\"?/*#__PURE__*/_jsx(\"img\",{src:\"data:;base64,\".concat(localStorage.profilePhoto),alt:\"\",className:\"rounded-circle\",style:{objectFit:\"cover\",width:\"22px\",height:\"22px\"}}):/*#__PURE__*/_jsx(PersonCircle,{size:25,className:\"icon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-capitalize\",children:localStorage.name.split(\" \")[0]})]})}):/*#__PURE__*/_jsx(Link,{to:\"/admindashboard\",children:/*#__PURE__*/_jsxs(\"a\",{children:[localStorage.profilePhoto!==\"null\"?/*#__PURE__*/_jsx(\"img\",{id:\"profilePhoto\",src:\"data:;base64,\".concat(localStorage.profilePhoto),alt:\"\",width:\"25px\",className:\"rounded-circle\"}):/*#__PURE__*/_jsx(PersonCircle,{size:25,className:\"icon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-capitalize\",children:localStorage.name.split(\" \")[0]})]})})}),localStorage.accessLevel<ACCESS_LEVEL_ADMIN?/*#__PURE__*/_jsx(\"div\",{className:\"cart-area\",children:/*#__PURE__*/_jsx(Link,{to:\"/shoppingcart\",children:/*#__PURE__*/_jsxs(\"a\",{children:[/*#__PURE__*/_jsx(Cart3,{size:25,className:\"icon\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"mb-3\",children:this.state.size})]})})}):null]});}}]);return MetaData;}(React.Component);export default MetaData;","map":{"version":3,"sources":["/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/components/Header/MetaData.jsx"],"names":["React","PersonCircle","Cart3","Link","SERVER_HOST","ACCESS_LEVEL_GUEST","ACCESS_LEVEL_NORMAL_USER","ACCESS_LEVEL_ADMIN","axios","MetaData","props","state","size","localStorage","accessLevel","parseInt","get","_id","then","res","data","errorMessage","console","log","setState","map","a","quantity","reduce","b","cart","curCart","JSON","parse","nextProps","nextState","prevProps","prevState","profilePhoto","objectFit","width","height","name","split","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { PersonCircle, Cart3 } from \"react-bootstrap-icons\";\nimport { Link } from \"react-router-dom\";\nimport {\n  SERVER_HOST,\n  ACCESS_LEVEL_GUEST,\n  ACCESS_LEVEL_NORMAL_USER,\n  ACCESS_LEVEL_ADMIN,\n} from \"../../config/global_constants\";\nimport axios from \"axios\";\n\nclass MetaData extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      size: 0,\n    };\n  }\n  componentDidMount() {\n    if (localStorage.accessLevel > parseInt(ACCESS_LEVEL_GUEST)) {\n      axios.get(`${SERVER_HOST}/cart/${localStorage._id}`).then((res) => {\n        if (res.data) {\n          if (res.data.errorMessage) {\n            console.log(res.data.errorMessage);\n          } else {\n            this.setState({\n              size: res.data.map((a) => a.quantity).reduce((a, b) => a + b, 0),\n            });\n          }\n        }\n      });\n    } else {\n      if (localStorage.cart !== \"null\") {\n        const curCart = JSON.parse(localStorage.cart);\n        let size = curCart\n          .map((a) => parseInt(a.quantity))\n          .reduce((a, b) => a + b, 0);\n        this.setState({\n          size: size,\n        });\n      }\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.state !== nextState;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (localStorage.accessLevel > parseInt(ACCESS_LEVEL_GUEST)) {\n      axios.get(`${SERVER_HOST}/cart/${localStorage._id}`).then((res) => {\n        if (res.data) {\n          if (res.data.errorMessage) {\n            console.log(res.data.errorMessage);\n          } else {\n            this.setState({\n              size: res.data.map((a) => a.quantity).reduce((a, b) => a + b, 0),\n            });\n          }\n        }\n        if (this.state.size !== prevState.size) {\n          this.setState({ size: this.state.size });\n        }\n      });\n    } else {\n      const curCart = JSON.parse(localStorage.cart);\n      let size = curCart.map((a) => a.quantity).reduce((a, b) => a + b, 0);\n      if (this.state.size !== size) {\n        this.setState({ size: size });\n      }\n    }\n  }\n  render() {\n    return (\n      <div className=\"header-meta d-flex clearfix justify-content-end\">\n        <div className=\"user-login-info\">\n          {parseInt(localStorage.accessLevel) === ACCESS_LEVEL_GUEST ? (\n            <Link to=\"/login\">\n              <a>\n                <PersonCircle size={25} className=\"icon\" />\n                <p>SIGN IN</p>\n              </a>\n            </Link>\n          ) : parseInt(localStorage.accessLevel) ===\n            ACCESS_LEVEL_NORMAL_USER ? (\n            <Link to={\"/account/\" + localStorage._id}>\n              <a>\n                {localStorage.profilePhoto !== \"null\" ? (\n                  <img\n                    src={`data:;base64,${localStorage.profilePhoto}`}\n                    alt=\"\"\n                    className=\"rounded-circle\"\n                    style={{\n                      objectFit: \"cover\",\n                      width: \"22px\",\n                      height: \"22px\",\n                    }}\n                  />\n                ) : (\n                  <PersonCircle size={25} className=\"icon\" />\n                )}\n                <p className=\"text-capitalize\">\n                  {localStorage.name.split(\" \")[0]}\n                </p>\n              </a>\n            </Link>\n          ) : (\n            <Link to={\"/admindashboard\"}>\n              <a>\n                {localStorage.profilePhoto !== \"null\" ? (\n                  <img\n                    id=\"profilePhoto\"\n                    src={`data:;base64,${localStorage.profilePhoto}`}\n                    alt=\"\"\n                    width=\"25px\"\n                    className=\"rounded-circle\"\n                  />\n                ) : (\n                  <PersonCircle size={25} className=\"icon\" />\n                )}\n\n                <p className=\"text-capitalize\">\n                  {localStorage.name.split(\" \")[0]}\n                </p>\n              </a>\n            </Link>\n          )}\n        </div>\n        {localStorage.accessLevel < ACCESS_LEVEL_ADMIN ? (\n          <div className=\"cart-area\">\n            <Link to=\"/shoppingcart\">\n              <a>\n                <Cart3 size={25} className=\"icon\" />\n                <h6 className=\"mb-3\">{this.state.size}</h6>\n              </a>\n            </Link>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default MetaData;\n"]},"metadata":{},"sourceType":"module"}