{"ast":null,"code":"var _jsxFileName = \"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/components/ShoppingCart/Checkout.jsx\";\nimport React from \"react\";\nimport { ACCESS_LEVEL_GUEST, SANDBOX_CLIENT_ID, SERVER_HOST } from \"../../config/global_constants\";\nimport { PayPalButton } from \"react-paypal-button-v2\";\nimport Swal from \"sweetalert2\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Checkout extends React.Component {\n  constructor() {\n    super(...arguments);\n\n    this.onSuccess = paymentData => {\n      console.log(\"PayPal payment was successful:\", paymentData);\n\n      if (localStorage.accessLevel > ACCESS_LEVEL_GUEST) {\n        let url = `${SERVER_HOST}/orders/${paymentData.id}/${this.props.amount}?userId=${localStorage._id}`;\n        this.props.cartItems.forEach(item => {\n          for (let i = 0; i < item.quantity; i++) {\n            url += `&productId=${item.productId}`;\n          }\n        });\n        axios.post(url);\n      }\n\n      Swal.fire({\n        title: \"PayPal payment was successful\",\n        icon: \"success\",\n        showConfirmButton: false,\n        timer: 2000\n      });\n    };\n\n    this.onError = errorData => {\n      console.log(\"PayPal error:\", errorData);\n      Swal.fire({\n        title: \"PayPal error\",\n        icon: \"error\",\n        showConfirmButton: true,\n        confirmButtonColor: \"#123c69\"\n      });\n    };\n\n    this.onCancel = cancelData => {\n      // The user pressed the Paypal checkout popup window cancel button or closed the Paypal checkout popup window\n      console.log(\"Payment cancelled by user:\", cancelData);\n      Swal.fire({\n        title: \"Payment cancelled by user\",\n        icon: \"warning\",\n        showConfirmButton: false,\n        timer: 2000\n      });\n    };\n  }\n\n  render() {\n    const client_id = SANDBOX_CLIENT_ID;\n    return /*#__PURE__*/_jsxDEV(PayPalButton, {\n      options: {\n        clientId: client_id,\n        currency: \"EUR\"\n      },\n      amount: this.props.amount,\n      onSuccess: this.onSuccess,\n      onError: this.onError,\n      onCancel: this.onCancel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/components/ShoppingCart/Checkout.jsx"],"names":["React","ACCESS_LEVEL_GUEST","SANDBOX_CLIENT_ID","SERVER_HOST","PayPalButton","Swal","axios","Checkout","Component","onSuccess","paymentData","console","log","localStorage","accessLevel","url","id","props","amount","_id","cartItems","forEach","item","i","quantity","productId","post","fire","title","icon","showConfirmButton","timer","onError","errorData","confirmButtonColor","onCancel","cancelData","render","client_id","clientId","currency"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,kBAAT,EAA6BC,iBAA7B,EAAgDC,WAAhD,QAAmE,+BAAnE;AACA,SAASC,YAAT,QAA6B,wBAA7B;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,eAAe,MAAMC,QAAN,SAAuBP,KAAK,CAACQ,SAA7B,CAAuC;AAAA;AAAA;;AAAA,SACpDC,SADoD,GACvCC,WAAD,IAAiB;AAC3BC,MAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA8CF,WAA9C;;AAEA,UAAGG,YAAY,CAACC,WAAb,GAA2Bb,kBAA9B,EAAkD;AAClD,YAAIc,GAAG,GAAI,GAAEZ,WAAY,WAAUO,WAAW,CAACM,EAAG,IAAG,KAAKC,KAAL,CAAWC,MAAO,WAAUL,YAAY,CAACM,GAAI,EAAlG;AAEA,aAAKF,KAAL,CAAWG,SAAX,CAAqBC,OAArB,CAA8BC,IAAD,IAAU;AACrC,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAI,CAACE,QAAzB,EAAmCD,CAAC,EAApC,EAAwC;AACtCR,YAAAA,GAAG,IAAK,cAAaO,IAAI,CAACG,SAAU,EAApC;AACD;AACF,SAJD;AAMAnB,QAAAA,KAAK,CAACoB,IAAN,CAAWX,GAAX;AACD;;AAECV,MAAAA,IAAI,CAACsB,IAAL,CAAU;AACRC,QAAAA,KAAK,EAAE,+BADC;AAERC,QAAAA,IAAI,EAAE,SAFE;AAGRC,QAAAA,iBAAiB,EAAE,KAHX;AAIRC,QAAAA,KAAK,EAAE;AAJC,OAAV;AAMD,KAtBmD;;AAAA,SAwBpDC,OAxBoD,GAwBzCC,SAAD,IAAe;AACvBtB,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BqB,SAA7B;AACA5B,MAAAA,IAAI,CAACsB,IAAL,CAAU;AACRC,QAAAA,KAAK,EAAE,cADC;AAERC,QAAAA,IAAI,EAAE,OAFE;AAGRC,QAAAA,iBAAiB,EAAE,IAHX;AAIRI,QAAAA,kBAAkB,EAAE;AAJZ,OAAV;AAMD,KAhCmD;;AAAA,SAkCpDC,QAlCoD,GAkCxCC,UAAD,IAAgB;AACzB;AACAzB,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CwB,UAA1C;AACA/B,MAAAA,IAAI,CAACsB,IAAL,CAAU;AACRC,QAAAA,KAAK,EAAE,2BADC;AAERC,QAAAA,IAAI,EAAE,SAFE;AAGRC,QAAAA,iBAAiB,EAAE,KAHX;AAIRC,QAAAA,KAAK,EAAE;AAJC,OAAV;AAMD,KA3CmD;AAAA;;AA6CpDM,EAAAA,MAAM,GAAG;AACP,UAAMC,SAAS,GAAGpC,iBAAlB;AAEA,wBACE,QAAC,YAAD;AACE,MAAA,OAAO,EAAE;AACPqC,QAAAA,QAAQ,EAAED,SADH;AAEPE,QAAAA,QAAQ,EAAE;AAFH,OADX;AAKE,MAAA,MAAM,EAAE,KAAKvB,KAAL,CAAWC,MALrB;AAME,MAAA,SAAS,EAAE,KAAKT,SANlB;AAOE,MAAA,OAAO,EAAE,KAAKuB,OAPhB;AAQE,MAAA,QAAQ,EAAE,KAAKG;AARjB;AAAA;AAAA;AAAA;AAAA,YADF;AAYD;;AA5DmD","sourcesContent":["import React from \"react\";\nimport { ACCESS_LEVEL_GUEST, SANDBOX_CLIENT_ID, SERVER_HOST } from \"../../config/global_constants\";\nimport { PayPalButton } from \"react-paypal-button-v2\";\nimport Swal from \"sweetalert2\";\nimport axios from \"axios\";\n\nexport default class Checkout extends React.Component {\n  onSuccess = (paymentData) => {\n    console.log(\"PayPal payment was successful:\", paymentData);\n\n    if(localStorage.accessLevel > ACCESS_LEVEL_GUEST) {\n    let url = `${SERVER_HOST}/orders/${paymentData.id}/${this.props.amount}?userId=${localStorage._id}`;\n\n    this.props.cartItems.forEach((item) => {\n      for (let i = 0; i < item.quantity; i++) {\n        url += `&productId=${item.productId}`;\n      }\n    });\n\n    axios.post(url);\n  }\n\n    Swal.fire({\n      title: \"PayPal payment was successful\",\n      icon: \"success\",\n      showConfirmButton: false,\n      timer: 2000,\n    });\n  };\n\n  onError = (errorData) => {\n    console.log(\"PayPal error:\", errorData);\n    Swal.fire({\n      title: \"PayPal error\",\n      icon: \"error\",\n      showConfirmButton: true,\n      confirmButtonColor: \"#123c69\",\n    });\n  };\n\n  onCancel = (cancelData) => {\n    // The user pressed the Paypal checkout popup window cancel button or closed the Paypal checkout popup window\n    console.log(\"Payment cancelled by user:\", cancelData);\n    Swal.fire({\n      title: \"Payment cancelled by user\",\n      icon: \"warning\",\n      showConfirmButton: false,\n      timer: 2000,\n    });\n  };\n\n  render() {\n    const client_id = SANDBOX_CLIENT_ID;\n\n    return (\n      <PayPalButton\n        options={{\n          clientId: client_id,\n          currency: \"EUR\",\n        }}\n        amount={this.props.amount}\n        onSuccess={this.onSuccess}\n        onError={this.onError}\n        onCancel={this.onCancel}\n      />\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}