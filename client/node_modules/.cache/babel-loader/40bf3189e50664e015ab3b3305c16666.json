{"ast":null,"code":"import _classCallCheck from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import axios from\"axios\";import{ACCESS_LEVEL_ADMIN,ACCESS_LEVEL_NORMAL_USER,SERVER_HOST}from\"../../config/global_constants\";import PurchasesRow from\"./PurchasesRow\";import{EmojiFrown}from\"react-bootstrap-icons\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AllPurchases=/*#__PURE__*/function(_React$Component){_inherits(AllPurchases,_React$Component);var _super=_createSuper(AllPurchases);function AllPurchases(props){var _this;_classCallCheck(this,AllPurchases);_this=_super.call(this,props);_this.state={orders:[]};return _this;}_createClass(AllPurchases,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.defaults.withCredentials=true;if(parseInt(localStorage.accessLevel)===ACCESS_LEVEL_ADMIN){axios.get(\"\".concat(SERVER_HOST,\"/orders\"),{headers:{authorization:localStorage.token}}).then(function(res){if(res.data){if(res.data.errorMessage){console.log(res.data.errorMessage);}else{console.log(res.data);console.log(\"Orders record read\");_this2.setState({orders:res.data});}}else{console.log(\"Orders record not found\");}});}else if(parseInt(localStorage.accessLevel)===ACCESS_LEVEL_NORMAL_USER){axios.get(\"\".concat(SERVER_HOST,\"/orders/user/\").concat(localStorage._id),{headers:{authorization:localStorage.token}}).then(function(res){if(res.data){if(res.data.errorMessage){console.log(res.data.errorMessage);}else{console.log(\"Orders record read\");_this2.setState({orders:res.data});}}else{console.log(\"Orders record not found\");}});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[console.log(this.state.orders),this.state.orders.length!==0?this.state.orders.map(function(order){return/*#__PURE__*/_jsx(Link,{to:{pathname:\"/orders/\".concat(order._id),state:{order:order}},children:/*#__PURE__*/_jsx(PurchasesRow,{order:order})});}):/*#__PURE__*/_jsxs(\"div\",{className:\"container text-center\",children:[/*#__PURE__*/_jsx(EmojiFrown,{className:\"mt-2\",size:\"50\",color:\"black\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-3 \",children:\"No purchases\"})]})]});}}]);return AllPurchases;}(React.Component);export default AllPurchases;","map":{"version":3,"sources":["/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/components/Purchases/AllPurchases.jsx"],"names":["React","axios","ACCESS_LEVEL_ADMIN","ACCESS_LEVEL_NORMAL_USER","SERVER_HOST","PurchasesRow","EmojiFrown","Link","AllPurchases","props","state","orders","defaults","withCredentials","parseInt","localStorage","accessLevel","get","headers","authorization","token","then","res","data","errorMessage","console","log","setState","_id","length","map","order","pathname","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport {\n  ACCESS_LEVEL_ADMIN,\n  ACCESS_LEVEL_NORMAL_USER,\n  SERVER_HOST,\n} from \"../../config/global_constants\";\nimport PurchasesRow from \"./PurchasesRow\";\nimport { EmojiFrown } from \"react-bootstrap-icons\";\nimport { Link } from \"react-router-dom\";\n\nclass AllPurchases extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      orders: [],\n    };\n  }\n  componentDidMount() {\n    axios.defaults.withCredentials = true;\n\n    if (parseInt(localStorage.accessLevel) === ACCESS_LEVEL_ADMIN) {\n      axios\n        .get(`${SERVER_HOST}/orders`, {\n          headers: { authorization: localStorage.token },\n        })\n        .then((res) => {\n          if (res.data) {\n            if (res.data.errorMessage) {\n              console.log(res.data.errorMessage);\n            } else {\n              console.log(res.data);\n              console.log(\"Orders record read\");\n              this.setState({ orders: res.data });\n            }\n          } else {\n            console.log(\"Orders record not found\");\n          }\n        });\n    } else if (\n      parseInt(localStorage.accessLevel) === ACCESS_LEVEL_NORMAL_USER\n    ) {\n      axios\n        .get(`${SERVER_HOST}/orders/user/${localStorage._id}`, {\n          headers: { authorization: localStorage.token },\n        })\n        .then((res) => {\n          if (res.data) {\n            if (res.data.errorMessage) {\n              console.log(res.data.errorMessage);\n            } else {\n              console.log(\"Orders record read\");\n              this.setState({ orders: res.data });\n            }\n          } else {\n            console.log(\"Orders record not found\");\n          }\n        });\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {console.log(this.state.orders)}\n        {this.state.orders.length !== 0 ? (\n          this.state.orders.map((order) => (\n            <Link\n              to={{\n                pathname: `/orders/${order._id}`,\n                state: {\n                  order: order,\n                },\n              }}\n            >\n              <PurchasesRow order={order} />\n            </Link>\n          ))\n        ) : (\n          <div className=\"container text-center\">\n            <EmojiFrown className=\"mt-2\" size=\"50\" color=\"black\" />\n            <h3 className=\"mt-3 \">No purchases</h3>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default AllPurchases;\n"]},"metadata":{},"sourceType":"module"}