{"ast":null,"code":"var _jsxFileName = \"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/components/Purchases/OrderReturn.jsx\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { SERVER_HOST } from \"../../config/global_constants\";\nimport ShopBanner from \"../ShopBanner\";\nimport OrderDetailsRow from \"./OrderDetailsRow\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass OrderReturn extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSelected = e => {\n      let selected = this.state.selected;\n      let index;\n\n      if (e.target.checked) {\n        selected.push(e.target.value);\n      } else {\n        index = selected.indexOf(e.target.value);\n        selected.splice(index, 1);\n      }\n\n      this.setState({\n        selected: selected\n      });\n    };\n\n    this.handleSubmit = e => {\n      axios.defaults.withCredentials = true;\n      axios.post(`${SERVER_HOST}/return/:orderid`);\n      window.location.reload(false);\n    };\n\n    this.state = {\n      products: [],\n      user: \"\",\n      photos: [],\n      quantity: [],\n      selected: [],\n      _id: \"\"\n    };\n  }\n\n  componentDidMount() {\n    axios.defaults.withCredentials = true;\n    axios.get(`${SERVER_HOST}/orders/${this.props.match.params.id}`, {\n      headers: {\n        authorization: localStorage.token\n      }\n    }).then(res => {\n      this.setState({\n        _id: res.data._id\n      });\n      let products = [];\n      res.data.products.map((product, index) => {\n        products[index] = product;\n        this.setState({\n          products: products\n        });\n      });\n\n      if (res.data.userId !== \"undefined\") {\n        axios.get(`${SERVER_HOST}/users/${res.data.userId}`, {\n          headers: {\n            authorization: localStorage.token\n          }\n        }).then(res => {\n          this.setState({\n            user: res.data.email\n          });\n        });\n      } else {\n        this.setState({\n          user: \"guest\"\n        });\n      }\n    });\n  }\n\n  render() {\n    console.log(this.state.selected);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-column align-items-center\",\n      children: [/*#__PURE__*/_jsxDEV(ShopBanner, {\n        title: \"Order Return\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hgvcfwqx container p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-center mb-4\",\n          children: \"Select items to return\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), this.state.products.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: this.handleSelected,\n            type: \"checkbox\",\n            value: product._id,\n            className: \"mr-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(OrderDetailsRow, {\n            product: product\n          }, product._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-light p-3 order-details-summary mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-center mb-4\",\n          children: \"Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Refund method: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"float-right\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Paypal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Shipping cost: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"float-right\",\n            children: \"FREE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-item mt-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Refund total: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"float-right\",\n            children: [\"\\u20AC\", this.props.location.state.order.amount + this.props.location.state.order.shippingCost]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row m-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.handleSubmit,\n          className: \"btn btn-success mr-3 mb-4 w-80\",\n          children: \"Confirm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: {\n            pathname: `/orders/${this.props.match.params.id}`,\n            state: {\n              order: this.props.location.state.order\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger ml-3 mb-4 w-80\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default OrderReturn;","map":{"version":3,"sources":["/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/components/Purchases/OrderReturn.jsx"],"names":["React","axios","SERVER_HOST","ShopBanner","OrderDetailsRow","Link","OrderReturn","Component","constructor","props","handleSelected","e","selected","state","index","target","checked","push","value","indexOf","splice","setState","handleSubmit","defaults","withCredentials","post","window","location","reload","products","user","photos","quantity","_id","componentDidMount","get","match","params","id","headers","authorization","localStorage","token","then","res","data","map","product","userId","email","render","console","log","order","amount","shippingCost","pathname"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport { SERVER_HOST } from \"../../config/global_constants\";\nimport ShopBanner from \"../ShopBanner\";\nimport OrderDetailsRow from \"./OrderDetailsRow\";\nimport { Link } from \"react-router-dom\";\n\nclass OrderReturn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      user: \"\",\n      photos: [],\n      quantity: [],\n      selected: [],\n      _id: \"\",\n    };\n  }\n\n  handleSelected = (e) => {\n    let selected = this.state.selected;\n    let index;\n    if (e.target.checked) {\n      selected.push(e.target.value);\n    } else {\n      index = selected.indexOf(e.target.value);\n      selected.splice(index, 1);\n    }\n    this.setState({ selected: selected });\n  };\n\n  handleSubmit = (e) => {\n    axios.defaults.withCredentials = true;\n\n    axios.post(`${SERVER_HOST}/return/:orderid`)\n\n    window.location.reload(false);\n  };\n\n  componentDidMount() {\n    axios.defaults.withCredentials = true;\n\n    axios\n      .get(`${SERVER_HOST}/orders/${this.props.match.params.id}`, {\n        headers: { authorization: localStorage.token },\n      })\n      .then((res) => {\n        this.setState({ _id: res.data._id });\n        let products = [];\n        res.data.products.map((product, index) => {\n          products[index] = product;\n          this.setState({ products: products });\n        });\n\n        if (res.data.userId !== \"undefined\") {\n          axios\n            .get(`${SERVER_HOST}/users/${res.data.userId}`, {\n              headers: { authorization: localStorage.token },\n            })\n            .then((res) => {\n              this.setState({ user: res.data.email });\n            });\n        } else {\n          this.setState({ user: \"guest\" });\n        }\n      });\n  }\n\n  render() {\n    console.log(this.state.selected);\n    return (\n      <div className=\"d-flex flex-column align-items-center\">\n        <ShopBanner title=\"Order Return\" />\n        <div className=\"hgvcfwqx container p-3\">\n          <h4 className=\"text-center mb-4\">Select items to return</h4>\n          {this.state.products.map((product) => (\n            <div className=\"d-flex align-items-center\">\n              <input\n                onChange={this.handleSelected}\n                type=\"checkbox\"\n                value={product._id}\n                className=\"mr-4\"\n              />\n              <OrderDetailsRow key={product._id} product={product} />\n            </div>\n          ))}\n        </div>\n\n        <div className=\"bg-light p-3 order-details-summary mb-4\">\n          <h4 className=\"text-center mb-4\">Summary</h4>\n          <div className=\"summary-item\">\n            <span>Refund method: </span>\n            <span className=\"float-right\">\n              <strong>Paypal</strong>\n            </span>\n          </div>\n          <div className=\"summary-item\">\n            <span>Shipping cost: </span>\n            <span className=\"float-right\">FREE</span>\n          </div>\n          <div className=\"summary-item mt-3\">\n            <span>Refund total: </span>\n            <span className=\"float-right\">\n              €\n              {this.props.location.state.order.amount +\n                this.props.location.state.order.shippingCost}\n            </span>\n          </div>\n        </div>\n        <div className=\"d-flex flex-row m-3\">\n          <button\n            onClick={this.handleSubmit}\n            className=\"btn btn-success mr-3 mb-4 w-80\"\n          >\n            Confirm\n          </button>\n          <Link\n            to={{\n              pathname: `/orders/${this.props.match.params.id}`,\n              state: {\n                order: this.props.location.state.order,\n              },\n            }}\n          >\n            <button className=\"btn btn-danger ml-3 mb-4 w-80\">Cancel</button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default OrderReturn;\n"]},"metadata":{},"sourceType":"module"}