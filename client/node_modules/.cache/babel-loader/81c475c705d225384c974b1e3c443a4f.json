{"ast":null,"code":"import _classCallCheck from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{ACCESS_LEVEL_GUEST,SERVER_HOST}from\"../../config/global_constants\";import axios from\"axios\";import Swal from\"sweetalert2\";import{Trash}from\"react-bootstrap-icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartRow=/*#__PURE__*/function(_React$Component){_inherits(CartRow,_React$Component);var _super=_createSuper(CartRow);function CartRow(props){var _this;_classCallCheck(this,CartRow);_this=_super.call(this,props);_this.handleIncreaseQuantity=function(e){if(_this.state.quantity===_this.state.stock){Swal.fire({title:\"Product not added\",text:\"Not enough stock\",icon:\"error\",showConfirmButton:true,confirmButtonColor:\"#123c69\"});}else{if(localStorage.accessLevel>parseInt(ACCESS_LEVEL_GUEST)){axios.put(\"\".concat(SERVER_HOST,\"/cart/increaseQuantity/\").concat(_this.props.item._id,\"/\").concat(_this.state._id)).then(function(res){window.location.reload(false);});}else{var curCart=JSON.parse(localStorage.cart);curCart.forEach(function(item){if(item.productId===_this.props.item.productId){item.quantity++;window.location.reload(false);}});localStorage.cart=JSON.stringify(curCart);}}};_this.handleDecreaseQuantity=function(e){if(localStorage.accessLevel>parseInt(ACCESS_LEVEL_GUEST)){axios.put(\"\".concat(SERVER_HOST,\"/cart/decreaseQuantity/\").concat(_this.props.item._id,\"/\").concat(_this.state._id)).then(function(res){window.location.reload(false);});}else{var curCart=JSON.parse(localStorage.cart);curCart.forEach(function(item){if(item.productId===_this.props.item.productId){item.quantity--;window.location.reload(false);}});localStorage.cart=JSON.stringify(curCart);}};_this.handleRemoveItem=function(e){var cartId=_this.state.cartId;var MySwal=Swal.mixin({customClass:{confirmButton:\"btn btn-success mr-2\",cancelButton:\"btn btn-danger ml-2\"},buttonsStyling:false});MySwal.fire({title:\"Remove item from shopping cart?\",icon:\"warning\",showCancelButton:true,confirmButtonColor:\"#5cb85c\",cancelButtonColor:\"#d33\",confirmButtonText:\"Yes, delete it!\"}).then(function(result){if(result.isConfirmed){if(localStorage.accessLevel>parseInt(ACCESS_LEVEL_GUEST)){axios.delete(\"\".concat(SERVER_HOST,\"/cart/\").concat(cartId)).then(function(res){window.location.reload(false);});}else{var index=0;var curCart=JSON.parse(localStorage.cart);curCart.forEach(function(item,i){if(item.productId===_this.props.item.productId){index=i;}});curCart.splice(index,1);localStorage.cart=JSON.stringify(curCart);window.location.reload(false);}}});};_this.state={productName:\"\",price:\"\",_id:\"\",quantity:_this.props.item.quantity,totalPrice:0,cartItem:\"\",stock:0,photos:[]};return _this;}_createClass(CartRow,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(\"\".concat(SERVER_HOST,\"/products/\").concat(this.props.item.productId)).then(function(res){if(res.data){if(res.data.errorMessage){console.log(res.data.errorMessage);}else{_this2.setState({_id:res.data._id,productName:res.data.productName,price:res.data.price,totalPrice:res.data.price*_this2.state.quantity,stock:res.data.stock,photos:res.data.photos});res.data.photos.map(function(photo){return axios.get(\"\".concat(SERVER_HOST,\"/products/photo/\").concat(photo.filename)).then(function(res){if(res.data){if(res.data.errorMessage){console.log(res.data.errorMessage);}else{document.getElementById(photo._id).src=\"data:;base64,\".concat(res.data.image);}}else{console.log(\"Record not found\");}});});}}else{console.log(\"Product not found\");}});if(localStorage.accessLevel>parseInt(ACCESS_LEVEL_GUEST)){axios.get(\"\".concat(SERVER_HOST,\"/cart/\").concat(this.props.item.productId,\"/\").concat(localStorage._id)).then(function(res){if(res.data){_this2.setState({cartId:res.data._id});_this2.setState({quantity:res.data.quantity});}});}else{JSON.parse(localStorage.cart).forEach(function(item){if(item.productId===_this2.props.item.productId){_this2.setState({cartId:item._id});_this2.setState({quantity:item.quantity});}});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"product border-bottom mt-0 mb-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:this.state.photos.map(function(photo,index){return index===0?/*#__PURE__*/_jsx(\"img\",{width:\"200px\",className:\"rounded\",id:photo._id,alt:\"Product\"},photo._id):null;})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"info\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{children:this.state.productName})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 quantity\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Quantity:\"}),/*#__PURE__*/_jsx(\"br\",{}),this.state.quantity>1?/*#__PURE__*/_jsx(\"button\",{className:\"btn rounded-circle mr-3\",onClick:this.handleDecreaseQuantity,children:\"-\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn rounded-circle mr-3\",onClick:this.handleRemoveItem,children:\"-\"}),this.state.quantity,/*#__PURE__*/_jsx(\"span\",{className:\"\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn rounded-circle ml-3\",onClick:this.handleIncreaseQuantity,children:\"+\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 price\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20AC\",(Math.round(this.state.totalPrice*100)/100).toFixed(2)]}),/*#__PURE__*/_jsx(Trash,{onClick:this.handleRemoveItem,className:\"ml-3 cursor-pointer\",color:\"#787878\",size:20})]})]})})})]})});}}]);return CartRow;}(React.Component);export default CartRow;","map":{"version":3,"sources":["/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/components/ShoppingCart/CartRow.jsx"],"names":["React","ACCESS_LEVEL_GUEST","SERVER_HOST","axios","Swal","Trash","CartRow","props","handleIncreaseQuantity","e","state","quantity","stock","fire","title","text","icon","showConfirmButton","confirmButtonColor","localStorage","accessLevel","parseInt","put","item","_id","then","res","window","location","reload","curCart","JSON","parse","cart","forEach","productId","stringify","handleDecreaseQuantity","handleRemoveItem","cartId","MySwal","mixin","customClass","confirmButton","cancelButton","buttonsStyling","showCancelButton","cancelButtonColor","confirmButtonText","result","isConfirmed","delete","index","i","splice","productName","price","totalPrice","cartItem","photos","get","data","errorMessage","console","log","setState","map","photo","filename","document","getElementById","src","image","Math","round","toFixed","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { ACCESS_LEVEL_GUEST, SERVER_HOST } from \"../../config/global_constants\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport { Trash } from \"react-bootstrap-icons\";\n\nclass CartRow extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      productName: \"\",\n      price: \"\",\n      _id: \"\",\n      quantity: this.props.item.quantity,\n      totalPrice: 0,\n      cartItem: \"\",\n      stock: 0,\n      photos: [],\n    };\n  }\n\n  componentDidMount() {\n    axios\n      .get(`${SERVER_HOST}/products/${this.props.item.productId}`)\n      .then((res) => {\n        if (res.data) {\n          if (res.data.errorMessage) {\n            console.log(res.data.errorMessage);\n          } else {\n            this.setState({\n              _id: res.data._id,\n              productName: res.data.productName,\n              price: res.data.price,\n              totalPrice: res.data.price * this.state.quantity,\n              stock: res.data.stock,\n              photos: res.data.photos,\n            });\n\n            res.data.photos.map((photo) => {\n              return axios\n                .get(`${SERVER_HOST}/products/photo/${photo.filename}`)\n                .then((res) => {\n                  if (res.data) {\n                    if (res.data.errorMessage) {\n                      console.log(res.data.errorMessage);\n                    } else {\n                      document.getElementById(\n                        photo._id\n                      ).src = `data:;base64,${res.data.image}`;\n                    }\n                  } else {\n                    console.log(\"Record not found\");\n                  }\n                });\n            });\n          }\n        } else {\n          console.log(`Product not found`);\n        }\n      });\n\n    if (localStorage.accessLevel > parseInt(ACCESS_LEVEL_GUEST)) {\n      axios\n        .get(\n          `${SERVER_HOST}/cart/${this.props.item.productId}/${localStorage._id}`\n        )\n        .then((res) => {\n          if (res.data) {\n            this.setState({ cartId: res.data._id });\n            this.setState({ quantity: res.data.quantity });\n          }\n        });\n    } else {\n      JSON.parse(localStorage.cart).forEach((item) => {\n        if (item.productId === this.props.item.productId) {\n          this.setState({ cartId: item._id });\n          this.setState({ quantity: item.quantity });\n        }\n      });\n    }\n  }\n\n  handleIncreaseQuantity = (e) => {\n    if (this.state.quantity === this.state.stock) {\n      Swal.fire({\n        title: \"Product not added\",\n        text: \"Not enough stock\",\n        icon: \"error\",\n        showConfirmButton: true,\n        confirmButtonColor: \"#123c69\",\n      });\n    } else {\n      if (localStorage.accessLevel > parseInt(ACCESS_LEVEL_GUEST)) {\n        axios\n          .put(\n            `${SERVER_HOST}/cart/increaseQuantity/${this.props.item._id}/${this.state._id}`\n          )\n          .then((res) => {\n            window.location.reload(false);\n          });\n      } else {\n        let curCart = JSON.parse(localStorage.cart);\n        curCart.forEach((item) => {\n          if (item.productId === this.props.item.productId) {\n            item.quantity++;\n            window.location.reload(false);\n          }\n        });\n\n        localStorage.cart = JSON.stringify(curCart);\n      }\n    }\n  };\n\n  handleDecreaseQuantity = (e) => {\n    if (localStorage.accessLevel > parseInt(ACCESS_LEVEL_GUEST)) {\n      axios\n        .put(\n          `${SERVER_HOST}/cart/decreaseQuantity/${this.props.item._id}/${this.state._id}`\n        )\n        .then((res) => {\n          window.location.reload(false);\n        });\n    } else {\n      let curCart = JSON.parse(localStorage.cart);\n      curCart.forEach((item) => {\n        if (item.productId === this.props.item.productId) {\n          item.quantity--;\n          window.location.reload(false);\n        }\n      });\n      localStorage.cart = JSON.stringify(curCart);\n    }\n  };\n\n  handleRemoveItem = (e) => {\n    let cartId = this.state.cartId;\n    const MySwal = Swal.mixin({\n      customClass: {\n        confirmButton: \"btn btn-success mr-2\",\n        cancelButton: \"btn btn-danger ml-2\",\n      },\n      buttonsStyling: false,\n    });\n\n    MySwal.fire({\n      title: \"Remove item from shopping cart?\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#5cb85c\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes, delete it!\",\n    }).then((result) => {\n      if (result.isConfirmed) {\n        if (localStorage.accessLevel > parseInt(ACCESS_LEVEL_GUEST)) {\n          axios.delete(`${SERVER_HOST}/cart/${cartId}`).then((res) => {\n            window.location.reload(false);\n          });\n        } else {\n          let index = 0;\n          let curCart = JSON.parse(localStorage.cart);\n          curCart.forEach((item, i) => {\n            if (item.productId === this.props.item.productId) {\n              index = i;\n            }\n          });\n          curCart.splice(index, 1);\n          localStorage.cart = JSON.stringify(curCart);\n          window.location.reload(false);\n        }\n      }\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"product border-bottom mt-0 mb-2\">\n        <div className=\"row\">\n          <div className=\"col-md-3\">\n            {this.state.photos.map((photo, index) =>\n              index === 0 ? (\n                <img\n                  width=\"200px\"\n                  className=\"rounded\"\n                  key={photo._id}\n                  id={photo._id}\n                  alt=\"Product\"\n                />\n              ) : null\n            )}\n          </div>\n          <div className=\"col-md-8\">\n            <div className=\"info\">\n              <div className=\"row\">\n                <div className=\"col-md-5\">\n                  <div>\n                    <h6>{this.state.productName}</h6>\n                  </div>\n                </div>\n                <div className=\"col-md-4 quantity\">\n                  <label>Quantity:</label>\n                  <br />\n                  {this.state.quantity > 1 ? (\n                    <button\n                      className=\"btn rounded-circle mr-3\"\n                      onClick={this.handleDecreaseQuantity}\n                    >\n                      -\n                    </button>\n                  ) : (\n                    <button\n                      className=\"btn rounded-circle mr-3\"\n                      onClick={this.handleRemoveItem}\n                    >\n                      -\n                    </button>\n                  )}\n                  {this.state.quantity}\n\n                  <span className=\"\">\n                    <button\n                      className=\"btn rounded-circle ml-3\"\n                      onClick={this.handleIncreaseQuantity}\n                    >\n                      +\n                    </button>\n                  </span>\n                </div>\n                <div className=\"col-md-3 price\">\n                  <span>\n                    €\n                    {(Math.round(this.state.totalPrice * 100) / 100).toFixed(2)}\n                  </span>\n                  <Trash\n                    onClick={this.handleRemoveItem}\n                    className=\"ml-3 cursor-pointer\"\n                    color=\"#787878\"\n                    size={20}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CartRow;\n"]},"metadata":{},"sourceType":"module"}