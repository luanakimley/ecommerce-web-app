{"ast":null,"code":"var _jsxFileName = \"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/pages/ShoppingCart.jsx\";\nimport React from \"react\";\nimport ShopBanner from \"../components/ShopBanner\";\nimport CartCard from \"../components/ShoppingCart/CartCard\";\nimport SummaryCard from \"../components/ShoppingCart/SummaryCard\";\nimport axios from \"axios\";\nimport { SERVER_HOST, ACCESS_LEVEL_GUEST } from \"../config/global_constants\";\nimport { Spinner } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ShoppingCart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cartItems: [],\n      subtotal: 0,\n      shipping: 0,\n      total: 0,\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.accessLevel > parseInt(ACCESS_LEVEL_GUEST)) {\n      axios.get(`${SERVER_HOST}/cart/${localStorage._id}`).then(res => {\n        if (res.data) {\n          if (res.data.errorMessage) {\n            console.log(res.data.errorMessage);\n          } else {\n            this.setState({\n              cartItems: res.data\n            });\n            const totalPrice = res.data.map(a => a.productPrice * a.quantity).reduce((a, b) => a + b, 0);\n            this.setState({\n              subtotal: totalPrice\n            });\n            this.setState({\n              shipping: this.state.subtotal >= 30 || this.state.subtotal === 0 ? 0 : 9\n            });\n            this.setState({\n              total: this.state.subtotal + this.state.shipping\n            });\n            this.setState({\n              cartLength: res.data.length\n            });\n            this.setState({\n              loading: false\n            });\n          }\n        }\n      });\n    } else {\n      this.setState({\n        loading: false\n      });\n\n      if (localStorage.cart !== \"null\") {\n        const cartItems = JSON.parse(localStorage.cart);\n        this.setState({\n          cartItems: cartItems\n        });\n        const totalPrice = cartItems.map(a => a.productPrice * a.quantity).reduce((a, b) => a + b, 0);\n        this.setState({\n          subtotal: totalPrice\n        });\n        let shipping = totalPrice.subtotal >= 30 || totalPrice.subtotal === 0 ? 0 : 9;\n        this.setState({\n          shipping: shipping\n        });\n        let total = totalPrice + shipping;\n        this.setState({\n          total: total\n        });\n      }\n    }\n  }\n\n  render() {\n    return this.state.loading ? /*#__PURE__*/_jsxDEV(Spinner, {\n      animation: \"border\",\n      role: \"status\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"visually-hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"main\", {\n      children: [console.log(this.state.cartItems), /*#__PURE__*/_jsxDEV(ShopBanner, {\n        title: \"Shopping Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"shopping-cart\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container pl-5 pr-5 pt-3 pb-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"content\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(CartCard, {\n                cartItems: this.state.cartItems\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(SummaryCard, {\n                subtotal: this.state.subtotal,\n                shipping: this.state.shipping,\n                total: this.state.total\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ShoppingCart;","map":{"version":3,"sources":["/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/pages/ShoppingCart.jsx"],"names":["React","ShopBanner","CartCard","SummaryCard","axios","SERVER_HOST","ACCESS_LEVEL_GUEST","Spinner","ShoppingCart","Component","constructor","props","state","cartItems","subtotal","shipping","total","loading","componentDidMount","localStorage","accessLevel","parseInt","get","_id","then","res","data","errorMessage","console","log","setState","totalPrice","map","a","productPrice","quantity","reduce","b","cartLength","length","cart","JSON","parse","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ShopBanner from \"../components/ShopBanner\";\nimport CartCard from \"../components/ShoppingCart/CartCard\";\nimport SummaryCard from \"../components/ShoppingCart/SummaryCard\";\nimport axios from \"axios\";\nimport { SERVER_HOST, ACCESS_LEVEL_GUEST } from \"../config/global_constants\";\nimport { Spinner } from \"react-bootstrap\";\n\nclass ShoppingCart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cartItems: [],\n      subtotal: 0,\n      shipping: 0,\n      total: 0,\n      loading: true,\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.accessLevel > parseInt(ACCESS_LEVEL_GUEST)) {\n      axios.get(`${SERVER_HOST}/cart/${localStorage._id}`).then((res) => {\n        if (res.data) {\n          if (res.data.errorMessage) {\n            console.log(res.data.errorMessage);\n          } else {\n            this.setState({ cartItems: res.data });\n            const totalPrice = res.data\n              .map((a) => a.productPrice * a.quantity)\n              .reduce((a, b) => a + b, 0);\n\n            this.setState({ subtotal: totalPrice });\n            this.setState({\n              shipping:\n                this.state.subtotal >= 30 || this.state.subtotal === 0 ? 0 : 9,\n            });\n            this.setState({ total: this.state.subtotal + this.state.shipping });\n            this.setState({ cartLength: res.data.length });\n            this.setState({ loading: false });\n          }\n        }\n      });\n    } else {\n      this.setState({ loading: false });\n      if (localStorage.cart !== \"null\") {\n        const cartItems = JSON.parse(localStorage.cart);\n        this.setState({ cartItems: cartItems });\n        const totalPrice = cartItems\n          .map((a) => a.productPrice * a.quantity)\n          .reduce((a, b) => a + b, 0);\n\n        this.setState({ subtotal: totalPrice });\n        let shipping =\n          totalPrice.subtotal >= 30 || totalPrice.subtotal === 0 ? 0 : 9;\n        this.setState({ shipping: shipping });\n        let total = totalPrice + shipping;\n        this.setState({ total: total });\n      }\n    }\n  }\n\n  render() {\n    return this.state.loading ? (\n      <Spinner animation=\"border\" role=\"status\">\n        <span className=\"visually-hidden\"></span>\n      </Spinner>\n    ) : (\n      <main>\n        {console.log(this.state.cartItems)}\n        <ShopBanner title=\"Shopping Cart\" />\n        <section className=\"shopping-cart\">\n          <div className=\"container pl-5 pr-5 pt-3 pb-3\">\n            <div className=\"content\">\n              <div className=\"row\">\n                <CartCard cartItems={this.state.cartItems} />\n                <SummaryCard\n                  subtotal={this.state.subtotal}\n                  shipping={this.state.shipping}\n                  total={this.state.total}\n                />\n              </div>\n            </div>\n          </div>\n        </section>\n      </main>\n    );\n  }\n}\n\nexport default ShoppingCart;\n"]},"metadata":{},"sourceType":"module"}