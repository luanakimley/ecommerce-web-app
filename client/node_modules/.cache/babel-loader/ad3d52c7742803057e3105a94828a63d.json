{"ast":null,"code":"var _jsxFileName = \"/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/pages/Shop.jsx\";\nimport React, { Component } from \"react\";\nimport ShopGrid from \"../components/ProductArea/ShopGrid\";\nimport ShopBanner from \"../components/ShopBanner\";\nimport SideBar from \"../components/ShopSideBar/SideBar\";\nimport axios from \"axios\";\nimport { SERVER_HOST } from \"../config/global_constants.js\";\nimport { Spinner } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Shop extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getAllItems = e => {\n      let url = `${SERVER_HOST}/products?`;\n\n      if (this.state.sort === \"nameAsc\") {\n        url += `&sortBy=productName&orderBy=1`;\n      } else if (this.state.sort === \"nameDesc\") {\n        url += `&sortBy=productName&orderBy=-1`;\n      } else if (this.state.sort === \"priceAsc\") {\n        url += `&sortBy=price&orderBy=1`;\n      } else if (this.state.sort === \"priceDesc\") {\n        url += `&sortBy=price&orderBy=-1`;\n      } else if (this.state.sort === \"stockAsc\") {\n        url += `&sortBy=stock&orderBy=1`;\n      } else if (this.state.sort === \"stockDesc\") {\n        url += `&sortBy=stock&orderBy=-1`;\n      }\n\n      axios.get(url).then(res => {\n        console.log(\"Records read\");\n        this.setState({\n          products: res.data\n        });\n        this.setState({\n          category: \"all items\"\n        });\n        const maxPrice = Math.max.apply(Math, this.state.products.map(p => p.price));\n        const minPrice = Math.min.apply(Math, this.state.products.map(p => p.price));\n        this.setState({\n          minPrice: minPrice\n        });\n        this.setState({\n          maxPrice: maxPrice\n        });\n        this.setState({\n          value: [minPrice, maxPrice]\n        });\n        const productCategories = this.state.products.map(product => product.categories);\n        this.setState({\n          uniqueCategories: [...new Set(productCategories.flat(1))].sort()\n        });\n        const productColours = this.state.products.map(product => product.colours);\n        this.setState({\n          uniqueColours: [...new Set(productColours.flat(1))].sort()\n        });\n        this.setState({\n          loading: false\n        });\n      }).catch(err => {\n        console.log(\"\");\n      });\n    };\n\n    this.handleCategoryFilter = e => {\n      let url = `${SERVER_HOST}/products?categories=${e.target.textContent.toLowerCase()}`;\n      this.setState({\n        category: e.target.textContent\n      });\n\n      if (this.state.sort === \"nameAsc\") {\n        url += `&sortBy=productName&orderBy=1`;\n      } else if (this.state.sort === \"nameDesc\") {\n        url += `&sortBy=productName&orderBy=-1`;\n      } else if (this.state.sort === \"priceAsc\") {\n        url += `&sortBy=price&orderBy=1`;\n      } else if (this.state.sort === \"priceDesc\") {\n        url += `&sortBy=price&orderBy=-1`;\n      } else if (this.state.sort === \"stockAsc\") {\n        url += `&sortBy=stock&orderBy=1`;\n      } else if (this.state.sort === \"stockDesc\") {\n        url += `&sortBy=stock&orderBy=-1`;\n      }\n\n      this.fetchItems(url);\n    };\n\n    this.handlePriceFilter = (e, newVal) => {\n      this.setState({\n        value: newVal\n      });\n      let url = `${SERVER_HOST}/products?`;\n\n      if (this.state.category !== \"all items\") {\n        url += `categories=${this.state.category.toLowerCase()}&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n        this.state.colours.forEach(colour => {\n          url += `&colours=${colour}`;\n        });\n      } else {\n        url += `&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n        this.state.colours.forEach(colour => {\n          url += `&colours=${colour}`;\n        });\n      }\n\n      if (this.state.sort === \"nameAsc\") {\n        url += `&sortBy=productName&orderBy=1`;\n      } else if (this.state.sort === \"nameDesc\") {\n        url += `&sortBy=productName&orderBy=-1`;\n      } else if (this.state.sort === \"priceAsc\") {\n        url += `&sortBy=price&orderBy=1`;\n      } else if (this.state.sort === \"priceDesc\") {\n        url += `&sortBy=price&orderBy=-1`;\n      } else if (this.state.sort === \"stockAsc\") {\n        url += `&sortBy=stock&orderBy=1`;\n      } else if (this.state.sort === \"stockDesc\") {\n        url += `&sortBy=stock&orderBy=-1`;\n      }\n\n      this.fetchItems(url);\n    };\n\n    this.handleColoursFilter = e => {\n      if (!this.state.colours.includes(e.target.textContent)) {\n        this.state.colours.push(e.target.textContent);\n      } else {\n        let index = this.state.colours.indexOf(e.target.textContent);\n        this.state.colours.splice(index, 1);\n      }\n\n      let url = `${SERVER_HOST}/products?`;\n\n      if (this.state.category !== \"all items\") {\n        url += `categories=${this.state.category.toLowerCase()}&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n        this.state.colours.forEach(colour => {\n          url += `&colours=${colour}`;\n        });\n      } else {\n        url += `&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n        this.state.colours.forEach(colour => {\n          url += `&colours=${colour}`;\n        });\n      }\n\n      if (this.state.sort === \"nameAsc\") {\n        url += `&sortBy=productName&orderBy=1`;\n      } else if (this.state.sort === \"nameDesc\") {\n        url += `&sortBy=productName&orderBy=-1`;\n      } else if (this.state.sort === \"priceAsc\") {\n        url += `&sortBy=price&orderBy=1`;\n      } else if (this.state.sort === \"priceDesc\") {\n        url += `&sortBy=price&orderBy=-1`;\n      } else if (this.state.sort === \"stockAsc\") {\n        url += `&sortBy=stock&orderBy=1`;\n      } else if (this.state.sort === \"stockDesc\") {\n        url += `&sortBy=stock&orderBy=-1`;\n      }\n\n      this.fetchItems(url);\n    };\n\n    this.handleSearch = e => {\n      this.setState({\n        searchQuery: e.target.value\n      });\n      let url = `${SERVER_HOST}/products?`;\n\n      if (this.state.category !== \"all items\") {\n        url += `categories=${this.state.category.toLowerCase()}&q=${e.target.value}&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n        this.state.colours.forEach(colour => {\n          url += `&colours=${colour}`;\n        });\n      } else {\n        url += `q=${e.target.value}&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n        this.state.colours.forEach(colour => {\n          url += `&colours=${colour}`;\n        });\n      }\n\n      if (this.state.sort === \"nameAsc\") {\n        url += `&sortBy=productName&orderBy=1`;\n      } else if (this.state.sort === \"nameDesc\") {\n        url += `&sortBy=productName&orderBy=-1`;\n      } else if (this.state.sort === \"priceAsc\") {\n        url += `&sortBy=price&orderBy=1`;\n      } else if (this.state.sort === \"priceDesc\") {\n        url += `&sortBy=price&orderBy=-1`;\n      } else if (this.state.sort === \"stockAsc\") {\n        url += `&sortBy=stock&orderBy=1`;\n      } else if (this.state.sort === \"stockDesc\") {\n        url += `&sortBy=stock&orderBy=-1`;\n      }\n\n      this.fetchItems(url);\n    };\n\n    this.handleSort = e => {\n      let url = `${SERVER_HOST}/products?`;\n\n      if (this.state.category !== \"all items\") {\n        url += `categories=${this.state.category.toLowerCase()}&productName=${this.state.searchQuery}&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n        this.state.colours.forEach(colour => {\n          url += `&colours=${colour}`;\n        });\n      } else {\n        url += `productName=${this.state.searchQuery}&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n        this.state.colours.forEach(colour => {\n          url += `&colours=${colour}`;\n        });\n      }\n\n      if (e.target.value === \"nameAsc\") {\n        url += `&sortBy=productName&orderBy=1`;\n        this.setState({\n          sort: e.target.value\n        });\n      } else if (e.target.value === \"nameDesc\") {\n        url += `&sortBy=productName&orderBy=-1`;\n        this.setState({\n          sort: e.target.value\n        });\n      } else if (e.target.value === \"priceAsc\") {\n        url += `&sortBy=price&orderBy=1`;\n        this.setState({\n          sort: e.target.value\n        });\n      } else if (e.target.value === \"priceDesc\") {\n        url += `&sortBy=price&orderBy=-1`;\n        this.setState({\n          sort: e.target.value\n        });\n      } else if (e.target.value === \"stockAsc\") {\n        url += `&sortBy=stock&orderBy=1`;\n        this.setState({\n          sort: e.target.value\n        });\n      } else if (e.target.value === \"stockDesc\") {\n        url += `&sortBy=stock&orderBy=-1`;\n        this.setState({\n          sort: e.target.value\n        });\n      } else {\n        this.setState({\n          sort: \"\"\n        });\n      }\n\n      this.fetchItems(url);\n    };\n\n    this.state = {\n      products: [],\n      category: \"all items\",\n      value: [],\n      minPrice: 1,\n      maxPrice: 100,\n      uniqueCategories: [],\n      colours: [],\n      uniqueColours: [],\n      searchQuery: \"\",\n      sort: \"\",\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    this.getAllItems();\n  }\n\n  fetchItems(url) {\n    axios.get(url).then(res => {\n      if (res.data) {\n        if (res.data.errorMessage) {\n          console.log(res.data.errorMessage);\n        } else {\n          console.log(\"Records read\");\n          this.setState({\n            products: res.data\n          });\n        }\n      } else {\n        console.log(\"Record not found\");\n      }\n    });\n  }\n\n  render() {\n    return this.state.loading ? /*#__PURE__*/_jsxDEV(Spinner, {\n      animation: \"border\",\n      role: \"status\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"visually-hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"main\", {\n      children: [/*#__PURE__*/_jsxDEV(ShopBanner, {\n        title: this.state.category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(SideBar, {\n              onFilter: this.handleCategoryFilter,\n              getAllItems: this.getAllItems,\n              onPriceFilter: this.handlePriceFilter,\n              value: this.state.value,\n              minPrice: this.state.minPrice,\n              maxPrice: this.state.maxPrice,\n              curMinPrice: this.state.value[0],\n              curMaxPrice: this.state.value[1],\n              uniqueCategories: this.state.uniqueCategories,\n              onColourFilter: this.handleColoursFilter,\n              uniqueColours: this.state.uniqueColours,\n              colours: this.state.colours,\n              onSearch: this.handleSearch,\n              curCategory: this.state.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ShopGrid, {\n              products: this.state.products,\n              onSort: this.handleSort\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Shop;","map":{"version":3,"sources":["/Users/luanakimley/nodejs-projects/ecommerce-web-app/client/src/pages/Shop.jsx"],"names":["React","Component","ShopGrid","ShopBanner","SideBar","axios","SERVER_HOST","Spinner","Shop","constructor","props","getAllItems","e","url","state","sort","get","then","res","console","log","setState","products","data","category","maxPrice","Math","max","apply","map","p","price","minPrice","min","value","productCategories","product","categories","uniqueCategories","Set","flat","productColours","colours","uniqueColours","loading","catch","err","handleCategoryFilter","target","textContent","toLowerCase","fetchItems","handlePriceFilter","newVal","forEach","colour","handleColoursFilter","includes","push","index","indexOf","splice","handleSearch","searchQuery","handleSort","componentDidMount","errorMessage","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport ShopGrid from \"../components/ProductArea/ShopGrid\";\nimport ShopBanner from \"../components/ShopBanner\";\nimport SideBar from \"../components/ShopSideBar/SideBar\";\nimport axios from \"axios\";\nimport { SERVER_HOST } from \"../config/global_constants.js\";\nimport { Spinner } from \"react-bootstrap\";\n\nclass Shop extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      category: \"all items\",\n      value: [],\n      minPrice: 1,\n      maxPrice: 100,\n      uniqueCategories: [],\n      colours: [],\n      uniqueColours: [],\n      searchQuery: \"\",\n      sort: \"\",\n      loading: true,\n    };\n  }\n\n  componentDidMount() {\n    this.getAllItems();\n  }\n\n  getAllItems = (e) => {\n    let url = `${SERVER_HOST}/products?`;\n\n    if (this.state.sort === \"nameAsc\") {\n      url += `&sortBy=productName&orderBy=1`;\n    } else if (this.state.sort === \"nameDesc\") {\n      url += `&sortBy=productName&orderBy=-1`;\n    } else if (this.state.sort === \"priceAsc\") {\n      url += `&sortBy=price&orderBy=1`;\n    } else if (this.state.sort === \"priceDesc\") {\n      url += `&sortBy=price&orderBy=-1`;\n    } else if (this.state.sort === \"stockAsc\") {\n      url += `&sortBy=stock&orderBy=1`;\n    } else if (this.state.sort === \"stockDesc\") {\n      url += `&sortBy=stock&orderBy=-1`;\n    }\n\n    axios.get(url).then((res) => {\n      console.log(\"Records read\");\n      this.setState({ products: res.data });\n      this.setState({ category: \"all items\" });\n      const maxPrice = Math.max.apply(\n        Math,\n        this.state.products.map((p) => p.price)\n      );\n      const minPrice = Math.min.apply(\n        Math,\n        this.state.products.map((p) => p.price)\n      );\n\n      this.setState({ minPrice: minPrice });\n      this.setState({ maxPrice: maxPrice });\n      this.setState({ value: [minPrice, maxPrice] });\n\n      const productCategories = this.state.products.map(\n        (product) => product.categories\n      );\n\n      this.setState({\n        uniqueCategories: [...new Set(productCategories.flat(1))].sort(),\n      });\n\n      const productColours = this.state.products.map(\n        (product) => product.colours\n      );\n\n      this.setState({\n        uniqueColours: [...new Set(productColours.flat(1))].sort(),\n      });\n\n      this.setState({ loading: false });\n    })\n    .catch(err => {\n      console.log(\"\")\n    })\n  };\n\n  fetchItems(url) {\n    axios.get(url).then((res) => {\n      if (res.data) {\n        if (res.data.errorMessage) {\n          console.log(res.data.errorMessage);\n        } else {\n          console.log(\"Records read\");\n          this.setState({\n            products: res.data,\n          });\n        }\n      } else {\n        console.log(\"Record not found\");\n      }\n    });\n  }\n\n  handleCategoryFilter = (e) => {\n    let url = `${SERVER_HOST}/products?categories=${e.target.textContent.toLowerCase()}`;\n\n    this.setState({ category: e.target.textContent });\n\n    if (this.state.sort === \"nameAsc\") {\n      url += `&sortBy=productName&orderBy=1`;\n    } else if (this.state.sort === \"nameDesc\") {\n      url += `&sortBy=productName&orderBy=-1`;\n    } else if (this.state.sort === \"priceAsc\") {\n      url += `&sortBy=price&orderBy=1`;\n    } else if (this.state.sort === \"priceDesc\") {\n      url += `&sortBy=price&orderBy=-1`;\n    } else if (this.state.sort === \"stockAsc\") {\n      url += `&sortBy=stock&orderBy=1`;\n    } else if (this.state.sort === \"stockDesc\") {\n      url += `&sortBy=stock&orderBy=-1`;\n    }\n\n    this.fetchItems(url);\n  };\n\n  handlePriceFilter = (e, newVal) => {\n    this.setState({ value: newVal });\n\n    let url = `${SERVER_HOST}/products?`;\n    if (this.state.category !== \"all items\") {\n      url += `categories=${this.state.category.toLowerCase()}&minprice=${\n        this.state.value[0]\n      }&maxprice=${this.state.value[1]}`;\n\n      this.state.colours.forEach((colour) => {\n        url += `&colours=${colour}`;\n      });\n    } else {\n      url += `&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n      this.state.colours.forEach((colour) => {\n        url += `&colours=${colour}`;\n      });\n    }\n\n    if (this.state.sort === \"nameAsc\") {\n      url += `&sortBy=productName&orderBy=1`;\n    } else if (this.state.sort === \"nameDesc\") {\n      url += `&sortBy=productName&orderBy=-1`;\n    } else if (this.state.sort === \"priceAsc\") {\n      url += `&sortBy=price&orderBy=1`;\n    } else if (this.state.sort === \"priceDesc\") {\n      url += `&sortBy=price&orderBy=-1`;\n    } else if (this.state.sort === \"stockAsc\") {\n      url += `&sortBy=stock&orderBy=1`;\n    } else if (this.state.sort === \"stockDesc\") {\n      url += `&sortBy=stock&orderBy=-1`;\n    }\n\n    this.fetchItems(url);\n  };\n\n  handleColoursFilter = (e) => {\n    if (!this.state.colours.includes(e.target.textContent)) {\n      this.state.colours.push(e.target.textContent);\n    } else {\n      let index = this.state.colours.indexOf(e.target.textContent);\n      this.state.colours.splice(index, 1);\n    }\n\n    let url = `${SERVER_HOST}/products?`;\n    if (this.state.category !== \"all items\") {\n      url += `categories=${this.state.category.toLowerCase()}&minprice=${\n        this.state.value[0]\n      }&maxprice=${this.state.value[1]}`;\n      this.state.colours.forEach((colour) => {\n        url += `&colours=${colour}`;\n      });\n    } else {\n      url += `&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n      this.state.colours.forEach((colour) => {\n        url += `&colours=${colour}`;\n      });\n    }\n\n    if (this.state.sort === \"nameAsc\") {\n      url += `&sortBy=productName&orderBy=1`;\n    } else if (this.state.sort === \"nameDesc\") {\n      url += `&sortBy=productName&orderBy=-1`;\n    } else if (this.state.sort === \"priceAsc\") {\n      url += `&sortBy=price&orderBy=1`;\n    } else if (this.state.sort === \"priceDesc\") {\n      url += `&sortBy=price&orderBy=-1`;\n    } else if (this.state.sort === \"stockAsc\") {\n      url += `&sortBy=stock&orderBy=1`;\n    } else if (this.state.sort === \"stockDesc\") {\n      url += `&sortBy=stock&orderBy=-1`;\n    }\n\n    this.fetchItems(url);\n  };\n\n  handleSearch = (e) => {\n    this.setState({ searchQuery: e.target.value });\n    let url = `${SERVER_HOST}/products?`;\n\n    if (this.state.category !== \"all items\") {\n      url += `categories=${this.state.category.toLowerCase()}&q=${\n        e.target.value\n      }&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n      this.state.colours.forEach((colour) => {\n        url += `&colours=${colour}`;\n      });\n    } else {\n      url += `q=${e.target.value}&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n      this.state.colours.forEach((colour) => {\n        url += `&colours=${colour}`;\n      });\n    }\n\n    if (this.state.sort === \"nameAsc\") {\n      url += `&sortBy=productName&orderBy=1`;\n    } else if (this.state.sort === \"nameDesc\") {\n      url += `&sortBy=productName&orderBy=-1`;\n    } else if (this.state.sort === \"priceAsc\") {\n      url += `&sortBy=price&orderBy=1`;\n    } else if (this.state.sort === \"priceDesc\") {\n      url += `&sortBy=price&orderBy=-1`;\n    } else if (this.state.sort === \"stockAsc\") {\n      url += `&sortBy=stock&orderBy=1`;\n    } else if (this.state.sort === \"stockDesc\") {\n      url += `&sortBy=stock&orderBy=-1`;\n    }\n\n    this.fetchItems(url);\n  };\n\n  handleSort = (e) => {\n    let url = `${SERVER_HOST}/products?`;\n\n    if (this.state.category !== \"all items\") {\n      url += `categories=${this.state.category.toLowerCase()}&productName=${\n        this.state.searchQuery\n      }&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n      this.state.colours.forEach((colour) => {\n        url += `&colours=${colour}`;\n      });\n    } else {\n      url += `productName=${this.state.searchQuery}&minprice=${this.state.value[0]}&maxprice=${this.state.value[1]}`;\n      this.state.colours.forEach((colour) => {\n        url += `&colours=${colour}`;\n      });\n    }\n\n    if (e.target.value === \"nameAsc\") {\n      url += `&sortBy=productName&orderBy=1`;\n      this.setState({ sort: e.target.value });\n    } else if (e.target.value === \"nameDesc\") {\n      url += `&sortBy=productName&orderBy=-1`;\n      this.setState({ sort: e.target.value });\n    } else if (e.target.value === \"priceAsc\") {\n      url += `&sortBy=price&orderBy=1`;\n      this.setState({ sort: e.target.value });\n    } else if (e.target.value === \"priceDesc\") {\n      url += `&sortBy=price&orderBy=-1`;\n      this.setState({ sort: e.target.value });\n    } else if (e.target.value === \"stockAsc\") {\n      url += `&sortBy=stock&orderBy=1`;\n      this.setState({ sort: e.target.value });\n    } else if (e.target.value === \"stockDesc\") {\n      url += `&sortBy=stock&orderBy=-1`;\n      this.setState({ sort: e.target.value });\n    } else {\n      this.setState({ sort: \"\" });\n    }\n\n    this.fetchItems(url);\n  };\n\n  render() {\n    return this.state.loading ? (\n      <Spinner animation=\"border\" role=\"status\">\n        <span className=\"visually-hidden\"></span>\n      </Spinner>\n    ) : (\n      <main>\n        <ShopBanner title={this.state.category} />\n        <section>\n          <div className=\"container\">\n            <div className=\"row\">\n              <SideBar\n                onFilter={this.handleCategoryFilter}\n                getAllItems={this.getAllItems}\n                onPriceFilter={this.handlePriceFilter}\n                value={this.state.value}\n                minPrice={this.state.minPrice}\n                maxPrice={this.state.maxPrice}\n                curMinPrice={this.state.value[0]}\n                curMaxPrice={this.state.value[1]}\n                uniqueCategories={this.state.uniqueCategories}\n                onColourFilter={this.handleColoursFilter}\n                uniqueColours={this.state.uniqueColours}\n                colours={this.state.colours}\n                onSearch={this.handleSearch}\n                curCategory={this.state.category}\n              />\n              <ShopGrid\n                products={this.state.products}\n                onSort={this.handleSort}\n              />\n            </div>\n          </div>\n        </section>\n      </main>\n    );\n  }\n}\n\nexport default Shop;\n"]},"metadata":{},"sourceType":"module"}